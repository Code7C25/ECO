<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ECO - Menú</title>

  <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Cardo&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    *{margin:0;padding:0;box-sizing:border-box;}

    body{
      font-family:"Poppins", sans-serif;
      background:#fff;
      color:#3c2a4d;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }

    /* ======= FONDO FIJO CON BLUR ======= */
    .bg-fixed{
      position:fixed;
      inset:0;
      background-image:url("fondo-eco.png");
      background-size:cover;
      background-position:center;
      filter:blur(14px) saturate(95%);
      transform:scale(1.03);
      z-index:0;
      pointer-events:none;
      transition:opacity .12s linear;
    }

    .page{
      position:relative;
      z-index:10;
      min-height:100vh;
    }

    /* ======= NAVBAR TRANSPARENTE ======= */
    .navbar{
      position:fixed;
      top:0;left:0;
      width:100%;
      height:70px;
      background:rgba(255,255,255,0.15);
      backdrop-filter:blur(12px) saturate(160%);
      -webkit-backdrop-filter:blur(12px) saturate(160%);
      border-bottom:1px solid rgba(255,255,255,0.2);
      display:grid;
      grid-template-columns:70px 1fr 200px;
      align-items:center;
      padding:0 40px;
      z-index:100;
    }

    .nav-logo{
      width:70px;
      cursor:pointer;
      transition:transform .3s;
    }
    .nav-logo:hover{transform:scale(1.08);}

    .nav-links{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:2rem;
      text-align:center;
    }

    .nav-links a,
    .dropdown-btn{
      text-decoration:none;
      font-size:1rem;
      color:#3c2a4d;
      background:none;
      border:none;
      font-family:inherit;
      cursor:pointer;
      position:relative;
      transition:color .3s ease;
    }

    .nav-links a::after,
    .dropdown-btn::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-4px;
      width:0;
      height:2px;
      background:#8b5bd1;
      transition:width .25s;
    }

    .nav-links a:hover::after,
    .dropdown-btn:hover::after{
      width:100%;
    }

    /* ======= DROPDOWN ======= */
    .dropdown{
      position:relative;
    }

    .dropdown-content{
      display:none;
      position:absolute;
      top:35px;
      left:0;
      background:rgba(255,255,255,0.92);
      backdrop-filter:blur(6px);
      border-radius:12px;
      min-width:160px;
      box-shadow:0 8px 20px rgba(0,0,0,0.15);
      overflow:hidden;
      animation:fadeIn .25s ease;
      z-index:200;
    }

    .dropdown:hover .dropdown-content{
      display:block;
    }

    .dropdown-content a{
      display:block;
      padding:12px 18px;
      text-decoration:none;
      color:#3c2a4d;
      transition:background .2s;
    }

    .dropdown-content a:hover{
      background:#e8d6ff;
      color:#4c195d;
    }

    /* ======= USER SECTION ======= */
    #userSection{
      display:flex;
      justify-content:flex-end;
      gap:12px;
      align-items:center;
    }

    .user-icon{
      width:40px;
      cursor:pointer;
      transition:transform .3s;
    }
    .user-icon:hover{transform:scale(1.12);}

    .auth-buttons{
      display:flex;
      gap:10px;
    }

    .auth-buttons button{
      background:#d96fc0;
      border:none;
      border-radius:20px;
      padding:8px 16px;
      color:white;
      font-weight:600;
      cursor:pointer;
      transition:.25s;
      box-shadow:0 4px 10px rgba(0,0,0,0.15);
    }
    .auth-buttons button:hover{
      background:#b94fa3;
      transform:translateY(-2px);
    }

    /* ============ HERO ============ */
    .hero{
      height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding:0 24px;
    }

    .hero-content{
      animation:fadeUp 900ms ease-out both;
    }

    @keyframes fadeUp{
      from{opacity:0; transform:translateY(18px);}
      to{opacity:1; transform:translateY(0);}
    }

    .welcome-text{
      font-family:"Pinyon Script", cursive;
      font-size:4.5rem;
      color:#4c195d;
      margin-bottom:8px;
    }

    .eco-logo{
      width:170px;
      margin:10px 0;
    }

    .slogan{
      font-family:"Cardo", serif;
      font-size:1.2rem;
      color:#444;
      margin-bottom:20px;
    }

    .btn-report{
      background:#d96fc0;
      color:white;
      border:none;
      border-radius:26px;
      padding:14px 36px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 8px 18px rgba(0,0,0,0.15);
      transition:.25s;
    }

    .btn-report:hover{
      background:#b94fa3;
      transform:translateY(-4px);
    }

    /* ========= SOBRE ECO ========= */
    .sobre-eco{
      min-height:130vh;
      background:white;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:120px 10%;
      position:relative;
      z-index:10;
    }

    .texto-wrap{
      font-size:1.45rem;
      line-height:1.9;
      max-width:900px;
      color:rgba(0,0,0,0.1);
    }

    .word{
      display:inline-block;
      opacity:.15;
      transition:.25s ease;
      margin-right:4px;
      white-space:pre;
      color:transparent;
      -webkit-text-fill-color:currentColor;
    }

    .word.on{
      opacity:1;
      color:#1a1520;
    }
    .word.on.accent{color:#4c195d;}

    /* Animación fadeIn dropdown */
    @keyframes fadeIn{
      from{opacity:0; transform:translateY(10px);}
      to{opacity:1; transform:translateY(0);}
    }
  </style>
</head>

<body>
  <!-- Fondo blur -->
  <div class="bg-fixed" id="bgFixed"></div>

  <div class="page">
    <!-- NAVBAR -->
    <header class="navbar">
      <img src="logo-eco.png" class="nav-logo" onclick="window.location.href='menu.html'">

      <nav class="nav-links">
        <a id="formularioLink" href="#">Formulario</a>

        <div class="dropdown">
          <button class="dropdown-btn">Herramientas</button>
          <div class="dropdown-content">
            <a href="respiracion.html">Respiración guiada</a>
            <a href="diario.html">Diario emocional</a>
            <a href="consejos.html">Consejos</a>
            <a href="afirmaciones.html">Afirmaciones</a>
          </div>
        </div>

        <a href="#sobre">Sobre ECO</a>
      </nav>

      <div id="userSection"></div>
    </header>

    <!-- HERO -->
    <section class="hero" id="hero">
      <div class="hero-content">
        <h1 class="welcome-text">Bienvenido a</h1>

        <img src="eco-logo.svg" class="eco-logo">

        <p class="slogan">Tu voz importa, estamos para ayudarte y acompañarte</p>

        <button class="btn-report" id="reportarBtn">Reportar caso</button>
      </div>
    </section>

    <!-- SOBRE ECO -->
    <section class="sobre-eco" id="sobre">
      <div class="texto-wrap" id="textoWrap"></div>
    </section>
  </div>

  <script>
    /* =============================
       LOGICA DE USUARIO (NO TOCADA)
    ============================== */
    const userLoggedIn = localStorage.getItem('ecoUserLogged') === 'true';
    const anonimo = localStorage.getItem('ecoAnonimo') === 'true';
    const userSection = document.getElementById("userSection");
    const formularioLink = document.getElementById("formularioLink");
    const reportarBtn = document.getElementById("reportarBtn");

    if(userLoggedIn && !anonimo){
      userSection.innerHTML = `<img src="user-icon.png" class="user-icon" onclick="window.location.href='perfil.html'">`;
      formularioLink.href = "formulario_p.html";
      reportarBtn.onclick = () => window.location.href="formulario_p.html";
    } else {
      userSection.innerHTML = `
        <div class="auth-buttons">
          <button onclick="window.location.href='login.html'">Iniciar sesión</button>
          <button onclick="window.location.href='registro.html'">Registrarse</button>
        </div>
      `;
      formularioLink.href = "formulario_a.html";
      reportarBtn.onclick = () => window.location.href="formulario_a.html";
    }

    /* =============================
       EFECTO FADE DEL FONDO
    ============================== */
    const bgFixed = document.getElementById("bgFixed");
    const sobre = document.getElementById("sobre");

    function updateBgOpacity(){
      const rect = sobre.getBoundingClientRect();
      const vh = window.innerHeight;
      const top = rect.top;

      const start = vh * 0.05;
      const end = vh * 0.65;

      const p = Math.min(Math.max((vh - top - start) / (end - start), 0), 1);

      bgFixed.style.opacity = (1 - p).toFixed(3);
    }

    window.addEventListener("scroll", updateBgOpacity, {passive:true});
    window.addEventListener("resize", updateBgOpacity);
    updateBgOpacity();

    /* =============================
       TEXTO “SOBRE ECO” REVEAL
    ============================== */
    const textoOriginal = `ECO es un espacio que conecta empatía, escucha y acción. Creemos en el poder de compartir y acompañar, en la importancia de cada historia. Nuestro propósito es brindarte un lugar seguro, humano y atento, donde puedas ser escuchado sin juicios.`;
    const textoWrap = document.getElementById("textoWrap");

    function splitWords(t){
      return t.match(/\S+|\s+/g) || [];
    }

    const tokens = splitWords(textoOriginal);
    textoWrap.innerHTML = "";
    const wordSpans = [];

    tokens.forEach(tok=>{
      const span = document.createElement("span");
      span.className = /\s+/.test(tok) ? "word space" : "word";
      span.textContent = tok;
      textoWrap.appendChild(span);
      if(!/\s+/.test(tok)) wordSpans.push(span);
    });

    function revealText(){
      const rect = textoWrap.getBoundingClientRect();
      const vh = window.innerHeight;

      const start = vh * 0.9;
      const end = vh * -0.3;

      const raw = (start - rect.top) / (start - end);
      const progress = Math.min(Math.max(raw,0),1);

      function ease(t){return 1 - Math.pow(1 - t, 3);}
      const eased = ease(progress);

      const count = Math.floor(eased * wordSpans.length);

      wordSpans.forEach((s,i)=>{
        if(i < count) s.classList.add("on");
        else s.classList.remove("on");
      });
    }

    window.addEventListener("scroll", revealText, {passive:true});
    window.addEventListener("resize", revealText);
    revealText();
  </script>

</body>
</html>
