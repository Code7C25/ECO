<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ECO - Men√∫</title>

  <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Cardo&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
  <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}

    body{
      font-family:"Poppins", sans-serif;
      background:#fff;
      color:#3c2a4d;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }

    /* ======= FONDO FIJO CON BLUR ======= */
    .bg-fixed{
      position:fixed;
      inset:0;
      background-image:url("../assets/fondo-eco.png");
      background-size:cover;
      background-position:center;
      filter:blur(14px) saturate(95%);
      transform:scale(1.03);
      z-index:0;
      pointer-events:none;
      transition:opacity .12s linear;
    }

    .page{
      position:relative;
      z-index:10;
      min-height:100vh;
    }

    /* ======= NAVBAR TRANSPARENTE Y BOTONES CENTRADOS ======= */
    .navbar{
      position:fixed;
      top:0;left:0;
      width:100%;
      height:70px;
      background:rgba(255,255,255,0.15);
      backdrop-filter:blur(12px) saturate(160%);
      -webkit-backdrop-filter:blur(12px) saturate(160%);
      border-bottom:1px solid rgba(255,255,255,0.2);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 24px;
      z-index:100;
    }

    .nav-left{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:70px;
    }

    .nav-right{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:120px;
      justify-content:flex-end;
    }

    .nav-logo{
      width:70px;
      cursor:pointer;
      transition:transform .3s;
    }
    .nav-logo:hover{transform:scale(1.08);}

    /* CENTRO EXACTO */
    .nav-center-wrapper{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:auto;
    }

    .nav-links{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:2rem;
      text-align:center;
      max-width:60vw;
    }

    .nav-links a,
    .dropdown-btn{
      text-decoration:none;
      font-size:1rem;
      color:#3c2a4d;
      background:none;
      border:none;
      font-family:inherit;
      cursor:pointer;
      position:relative;
      transition:color .3s ease;
    }

    .nav-links a::after,
    .dropdown-btn::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-4px;
      width:0;
      height:2px;
      background:#8b5bd1;
      transition:width .25s;
    }

    .nav-links a:hover::after,
    .dropdown-btn:hover::after{
      width:100%;
    }

    /* ======= DROPDOWN ESCRITORIO ======= */
    .dropdown{ position:relative; }

    .dropdown-content{
      display:none;
      position:absolute;
      top:35px;
      left:0;
      background:rgba(255,255,255,0.92);
      backdrop-filter:blur(6px);
      border-radius:12px;
      min-width:160px;
      box-shadow:0 8px 20px rgba(0,0,0,0.15);
      overflow:hidden;
      animation:fadeIn .25s ease;
      z-index:9999;
      pointer-events:auto;
    }

    .dropdown:hover .dropdown-content,
    .dropdown.open .dropdown-content{
      display:block;
    }

    .dropdown-content a{
      display:block;
      padding:12px 18px;
      text-decoration:none;
      color:#3c2a4d;
      transition:background .2s;
    }
    .dropdown-content a:hover{
      background:#e8d6ff;
      color:#4c195d;
    }

    /* ======= USER SECTION ======= */
    #userSection{
      display:flex;
      justify-content:flex-end;
      gap:12px;
      align-items:center;
    }

    .user-icon{
      width:40px;
      cursor:pointer;
      transition:transform .3s;
    }
    .user-icon:hover{transform:scale(1.12);}

    .auth-buttons{
      display:flex;
      gap:10px;
    }

    .auth-buttons button{
      background:#d96fc0;
      border:none;
      border-radius:20px;
      padding:8px 16px;
      color:white;
      font-weight:600;
      cursor:pointer;
      transition:.25s;
      box-shadow:0 4px 10px rgba(0,0,0,0.15);
    }
    .auth-buttons button:hover{
      background:#b94fa3;
      transform:translateY(-2px);
    }

    /* ============ HERO ============ */
    .hero{
      height:100vh;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      padding:0 24px;
    }

    .hero-content{
      animation:fadeUp 900ms ease-out both;
    }

    @keyframes fadeUp{
      from{opacity:0; transform:translateY(18px);}
      to{opacity:1; transform:translateY(0);}
    }

    .welcome-text{
      font-family:"Pinyon Script", cursive;
      font-size:4.5rem;
      color:#4c195d;
      margin-bottom:8px;
    }

    .eco-logo{
      width:170px;
      margin:10px 0;
    }

    .slogan{
      font-family:"Cardo", serif;
      font-size:1.2rem;
      color:#444;
      margin-bottom:20px;
    }

    .btn-report{
      background:#d96fc0;
      color:white;
      border:none;
      border-radius:26px;
      padding:14px 36px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 8px 18px rgba(0,0,0,0.15);
      transition:.25s;
    }

    .btn-report:hover{
      background:#b94fa3;
      transform:translateY(-4px);
    }

    /* ========= SOBRE ECO ========= */
    .sobre-eco{
      min-height:130vh;
      background:white;
      padding:120px 10% 40px 10%;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      align-items:center;
      text-align:center;
    }

    .texto-wrap{
      max-width:900px;
      width:90%;
      font-size:1.4rem;
      line-height:1.9;
      text-align:left;
      margin:50px auto 0 auto;
      padding:0 10px;
    }

    .word{
      display:inline-block;
      opacity:.15;
      transition:.25s ease;
      margin-right:4px;
      white-space:pre;
      color:transparent;
      -webkit-text-fill-color:currentColor;
    }

    .eco-cabeza{
      display:block;
      margin:20px auto 30px auto;
      width:130px;
      opacity:0.95;
    }

    .eco-divisor{
      display:block;
      margin:40px auto 0 auto;
      width:100%;
      max-width:320px;
      opacity:0.95;
    }

    .word.on{
      opacity:1;
      color:#1a1520;
    }

    @keyframes fadeIn{
      from{opacity:0; transform:translateY(10px);}
      to{opacity:1; transform:translateY(0);}
    }

    /* üîπ ELEMENTOS SOLO MOBILE ‚Äî OCULTOS EN ESCRITORIO üîπ */
    .hamburger,
    .mobile-menu,
    .mobile-bg,
    #mobileAuth{
      display:none;
    }

    /* ========================================================
       üì± ESTILOS SOLO PARA CELULAR
       ======================================================== */
    @media (max-width:600px){

      .nav-center-wrapper{ display:none!important; }
      .nav-right{ display:none!important; }

      .navbar{
        padding:0 16px;
        justify-content:flex-start;
      }

      .hamburger{
        display:flex;
        width:34px;
        height:26px;
        flex-direction:column;
        justify-content:space-between;
        cursor:pointer;
      }
      .hamburger div{
        height:4px;
        background:#4c195d;
        border-radius:10px;
      }

      .nav-left{
        flex:1;
        justify-content:flex-end;
      }

      .nav-logo{
        width:64px;
      }

      .mobile-menu{
        display:flex;
        position:fixed;
        top:0;
        left:-260px;
        width:260px;
        height:100vh;
        background:rgba(255,255,255,0.97);
        backdrop-filter:blur(12px);
        box-shadow:4px 0 16px rgba(0,0,0,0.2);
        padding:28px 22px;
        flex-direction:column;
        gap:14px;
        transition:left .3s ease;
        z-index:99999;
      }

      .mobile-menu.open{ left:0; }

      .mobile-menu a{
        font-size:1.15rem;
        color:#4c195d;
        text-decoration:none;
        padding:6px 0;
      }

      .mobile-dropdown-btn{
        background:none;
        border:none;
        padding:6px 0;
        font-size:1.15rem;
        color:#4c195d;
        text-align:left;
        cursor:pointer;
      }

      .mobile-submenu{
        display:none;
        flex-direction:column;
        margin-left:12px;
        gap:6px;
      }
      .mobile-submenu.open{
        display:flex;
      }

      #mobileAuth{ display:block; }

      .mobile-auth{
        margin-top:20px;
        padding-top:10px;
        border-top:1px solid rgba(0,0,0,0.2);
        display:flex;
        flex-direction:column;
        gap:10px;
      }
      .mobile-auth button{
        background:#d96fc0;
        border:none;
        padding:10px;
        border-radius:20px;
        font-weight:600;
        color:white;
      }

      .mobile-bg{
        display:block;
        position:fixed;
        inset:0;
        background:rgba(0,0,0,0.35);
        backdrop-filter:blur(2px);
        opacity:0;
        pointer-events:none;
        transition:.3s;
        z-index:9999;
      }
      .mobile-bg.show{
        opacity:1;
        pointer-events:all;
      }
    }
  </style>
</head>

<body>
  <div class="bg-fixed" id="bgFixed"></div>

  <div class="page">

    <header class="navbar">

      <!-- HAMBURGUESA (solo m√≥vil) -->
      <div class="hamburger" onclick="openMobileMenu()">
        <div></div><div></div><div></div>
      </div>

      <!-- LOGO -->
      <div class="nav-left">
        <img src="../assets/logo-eco.png" class="nav-logo" id="boton-menu" onclick="window.location.href='menu.html'">
      </div>

      <!-- MEN√ö ESCRITORIO -->
      <div class="nav-center-wrapper">
        <nav class="nav-links">
          <a id="formularioLink" href="#">Formulario</a>

          <div class="dropdown" id="herramientasDropdown">
            <button class="dropdown-btn" id="herramientasBtn">Herramientas</button>
            <div class="dropdown-content">
              <a href="respiracion.html">Respiraci√≥n guiada</a>
              <a href="diario.html">Diario emocional</a>
              <a href="consejos.html">Consejos</a>
              <a href="afirmaciones.html">Afirmaciones</a>
              <a href="musica.html">M√∫sica</a>
            </div>
          </div>

          <a href="#sobre">Sobre ECO</a>
        </nav>
      </div>

      <!-- SECCI√ìN USUARIO (OCULTA EN CELULAR POR CSS) -->
      <div class="nav-right">
        <div id="userSection"></div>
        <button onclick="iniciarTour()" 
        style="background:none; border:none; color:#4c195d; font-weight:600; cursor:pointer;">
         ?
        </button>
        <button id="boton-volver" style="opacity:0; pointer-events:none; position:absolute;"></button>
      </div>

    </header>
   

    <!-- ‚≠ê‚≠ê‚≠ê MEN√ö LATERAL M√ìVIL ‚≠ê‚≠ê‚≠ê -->
    <nav id="mobileMenu" class="mobile-menu">

      <a id="mobileFormularioLink" href="#">Formulario</a>

      <button type="button" class="mobile-dropdown-btn" onclick="toggleMobileSubmenu()">Herramientas ‚ñº</button>

      <div id="mobileSubmenu" class="mobile-submenu">
        <a href="respiracion.html">Respiraci√≥n guiada</a>
        <a href="diario.html">Diario emocional</a>
        <a href="consejos.html">Consejos</a>
        <a href="afirmaciones.html">Afirmaciones</a>
        <a href="musica.html">M√∫sica</a>
      </div>

      <a href="#sobre" onclick="closeMobileMenu()">Sobre ECO</a>

      <div id="mobileAuth"></div>
    </nav>

    <!-- Fondo oscuro detr√°s del men√∫ m√≥vil -->
    <div id="mobileBg" class="mobile-bg" onclick="closeMobileMenu()"></div>

    <!-- CONTENIDO PRINCIPAL -->
    <section class="hero" id="hero">
      <div class="hero-content">
        <h1 class="welcome-text">Bienvenido a</h1>
        <img src="../assets/eco-logo.svg" class="eco-logo">
        <p class="slogan">Tu voz importa, estamos para ayudarte y acompa√±arte</p>
        <button class="btn-report" id="reportarBtn">Reportar caso</button>
      </div>
    </section>

    <section class="sobre-eco" id="sobre">
      <img src="../assets/cabeza.png" class="eco-cabeza" alt="Decoraci√≥n">
      <div class="texto-wrap" id="textoWrap"></div>
    </section>

  </div>
<script>
/* =====================================================
      LOGICA DE USUARIO (ESCRITORIO + M√ìVIL)
===================================================== */

const userLoggedIn = localStorage.getItem('ecoUserLogged') === 'true';
const anonimo = localStorage.getItem('ecoAnonimo') === 'true';

const userSection = document.getElementById("userSection");
const formularioLink = document.getElementById("formularioLink");
const reportarBtn = document.getElementById("reportarBtn");

/* m√≥vil */
const mobileFormularioLink = document.getElementById("mobileFormularioLink");
const mobileAuth = document.getElementById("mobileAuth");

if(userLoggedIn && !anonimo){

  /* üñ•Ô∏è ESCRITORIO LOGUEADO: SIN ICONO DE PERFIL */
  userSection.innerHTML = ""; // ac√° antes estaba el <img user-icon>

  formularioLink.href = "formulario_p.html";
  reportarBtn.onclick = () => window.location.href="formulario_p.html";

  /* üì± M√ìVIL LOGUEADO */
  mobileFormularioLink.href = "formulario_p.html";
  mobileAuth.innerHTML = ""; // no mostrar botones en m√≥vil estando logueado

} else {

  /* üñ•Ô∏è ESCRITORIO NO LOGUEADO: mantiene los botones de iniciar/registrar */
  userSection.innerHTML = `
    <div class="auth-buttons">
      <button onclick="window.location.href='login.html?from=menu'">Iniciar sesi√≥n</button>
      <button onclick="window.location.href='registro.html?from=menu'">Registrarse</button>
    </div>
  `;
  formularioLink.href = "formulario_a.html";
  reportarBtn.onclick = () => window.location.href="formulario_a.html";

  /* üì± M√ìVIL NO LOGUEADO */
  mobileFormularioLink.href = "formulario_a.html";
  mobileAuth.innerHTML = `
    <div class="mobile-auth">
      <button onclick="window.location.href='login.html?from=menu'">Iniciar sesi√≥n</button>
      <button onclick="window.location.href='registro.html?from=menu'">Registrarse</button>
    </div>
  `;
}

/* =====================================================
      MEN√ö M√ìVIL
===================================================== */

function openMobileMenu(){
  document.getElementById("mobileMenu").classList.add("open");
  document.getElementById("mobileBg").classList.add("show");
}
function closeMobileMenu(){
  document.getElementById("mobileMenu").classList.remove("open");
  document.getElementById("mobileBg").classList.remove("show");
}
function toggleMobileSubmenu(){
  document.getElementById("mobileSubmenu").classList.toggle("open");
}


/* =====================================================
      FONDO FADE SEG√öN SCROLL
===================================================== */

const bgFixed = document.getElementById("bgFixed");
const sobre = document.getElementById("sobre");

function updateBgOpacity(){
  const rect = sobre.getBoundingClientRect();
  const vh = window.innerHeight;
  const top = rect.top;

  const start = vh * 0.05;
  const end = vh * 0.65;

  const p = Math.min(Math.max((vh - top - start) / (end - start), 0), 1);

  bgFixed.style.opacity = (1 - p).toFixed(3);
}

window.addEventListener("scroll", updateBgOpacity, {passive:true});
window.addEventListener("resize", updateBgOpacity);
updateBgOpacity();


/* =====================================================
      TEXTO SOBRE ECO ‚Äî ANIMACI√ìN ORIGINAL RESTAURADA
===================================================== */

const textoOriginal = `ECO es una plataforma creada para que cualquier estudiante pueda pedir ayuda de forma segura, clara y confidencial. Su principal objetivo es brindar un canal directo para reportar situaciones de bullying o malestar dentro del √°mbito escolar, para que cada caso enviado llegue inmediatamente al equipo de psic√≥logos del colegio, quienes lo analizan y acompa√±an el proceso con respeto y profesionalismo. Adem√°s, ECO ofrece herramientas de autocuidado pensadas para acompa√±arte mientras atraves√°s el proceso: respiraci√≥n guiada, diario emocional, afirmaciones y otros recursos breves que pueden ayudarte a regular emociones y entender mejor lo que sent√≠s. Nuestro prop√≥sito es simple: crear un espacio de escucha donde puedas expresarte sin miedo y encontrar apoyo real.`;

const textoWrap = document.getElementById("textoWrap");

/* dividir en palabras + espacios como el archivo original */
function splitWords(t){
  return t.match(/\S+|\s+/g) || [];
}

const tokens = splitWords(textoOriginal);
textoWrap.innerHTML = "";
const wordSpans = [];

tokens.forEach(tok => {
  const span = document.createElement("span");
  span.className = /\s+/.test(tok) ? "word space" : "word";
  span.textContent = tok;
  textoWrap.appendChild(span);
  if(!/\s+/.test(tok)) wordSpans.push(span);
});
function revealText(){
  const rect = textoWrap.getBoundingClientRect();
  const vh = window.innerHeight;

  const start = vh * 0.75;
  const end = vh * -0.2;

  const raw = (start - rect.top) / (start - end);
  let progress = Math.min(Math.max(raw, 0), 1);

  // ‚úÖ Si llegaste casi al final de la p√°gina, fuerza el texto completo
  const scrollBottom = window.scrollY + window.innerHeight;
  const pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight;

  if (scrollBottom >= pageHeight - 5) {
    progress = 1;
  }

  // easing cubic
  const ease = t => 1 - Math.pow(1 - t, 3);
  const eased = ease(progress);

  let count = Math.ceil(eased * wordSpans.length);
  count = Math.min(count, wordSpans.length);

  wordSpans.forEach((s, i)=>{
    if(i < count) s.classList.add("on");
    else s.classList.remove("on");
  });
}
window.addEventListener("scroll", revealText, { passive:true });
window.addEventListener("resize", revealText);
revealText();


/* =====================================================
      DROPDOWN ESCRITORIO (t√°ctil + hover)
===================================================== */

(function(){
  const dropdown = document.getElementById('herramientasDropdown');
  const btn = document.getElementById('herramientasBtn');

  if(!dropdown || !btn) return;

  btn.addEventListener('click', function(e){
    e.stopPropagation();
    const isOpen = dropdown.classList.contains('open');

    document.querySelectorAll('.dropdown.open')
      .forEach(d => d.classList.remove('open'));

    if(!isOpen){
      dropdown.classList.add('open');
      btn.setAttribute('aria-expanded','true');
    } else {
      dropdown.classList.remove('open');
      btn.setAttribute('aria-expanded','false');
    }
  });

  dropdown.querySelector('.dropdown-content').addEventListener('click', e=>{
    e.stopPropagation();
  });

  document.addEventListener('click', function(){
    dropdown.classList.remove('open');
    btn.setAttribute('aria-expanded','false');
  });

  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && dropdown.classList.contains('open')){
      dropdown.classList.remove('open');
      btn.setAttribute('aria-expanded','false');
      btn.focus();
    }
  });
})();
 /* =====================================================
      MANUAL INTERACTIVO ‚Äî INTRO.JS
===================================================== */

function iniciarTour() {
  introJs().setOptions({
    steps: [
      { intro: "Bienvenido al manual interactivo de ECO" },
      { element: "#boton-menu", intro: "Desde ac√° abr√≠s el men√∫" },
      { element: "#boton-volver", intro: "Este es el bot√≥n para volver" }
    ]
  }).start();
}
</script>
<!-- botones invisibles para que el tour funcione -->
<button id="boton-menu" style="opacity:0; position:absolute; pointer-events:none;"></button>
<button id="boton-volver" style="opacity:0; position:absolute; pointer-events:none;"></button>
</body>
</html>
